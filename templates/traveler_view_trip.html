<!-- 
<!DOCTYPE html>
<html> -->
{% extends "layout.html" %}

{% block head %}
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<link type = "text/css" rel="stylesheet" href="/static/css/style.css">
<script type="text/javascript" src="../static/js/jquery-1.11.1.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"></script>
<script type="text/javascript" src="../static/js/traveler_view.js"></script>
{% endblock %}

{% block body %} 
<!-- <body>
 -->    <div id="map-canvas"></div>
    	<div id="controls" class="enterLocation">
        <form id="locations">
            <input type="text" placeholder="Current Location" id="currentLocation">
            <input type="text" placeholder="Destination" id="destination">
            <input type="submit" value="Request Voyage">
            <div id="mapCanvas"></div>

        </form>
        </div>
<script>
function checkStatus(){
	console.log("is this working");
	$.ajax({
		"url":"/traveler_status", 
		"type": "GET" 
	}).done(function(res) {
		console.log("this is res"+res);
		if (res == "pending") {
		    $('#pending').show();
		} else if (res == "accepted") {
		    $('#accepted').show();
		    $('#pending').hide();
		} else if (res == "commenced") {
		    $('#commenced').show();
		    $('#accepted').hide();
		} else if (res == "completed") {
		    $('body').load("/traveler_rate_your_guide");
		}
	});

}
$(document).ready(function(){
	setInterval(checkStatus,1000);
});

</script>
		<div id="pending" style='display:none;'>
            Pending
        </div>
        <div id="accepted" style='display:none;'>
            Accepted
        </div>
        <div id="commenced" style='display:none;'>
            Commenced
        </div>
        <div id="completed" style='display:none;'>
            Completed
        </div>
<!-- </body>
 -->
<!-- </html>
 -->{% endblock %}